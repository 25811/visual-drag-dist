"use strict";(self["webpackChunkvisual_drag_demo"]=self["webpackChunkvisual_drag_demo"]||[]).push([[430],{5430:function(t,e,n){n.r(e),n.d(e,{default:function(){return Fn}});var o=function(){var t=this,e=t._self._c;return e("div",{class:t.isDarkMode?"home dark":"home"},[e("Toolbar"),e("main",[e("section",{class:t.leftList?"left active":"left inactive"},[e("ComponentList")],1),e("section",{staticClass:"center",style:(t.rightList,"margin-right:10px")},[e("div",{staticClass:"content",on:{drop:t.handleDrop,dragover:t.handleDragOver,mousedown:t.handleMouseDown,mouseup:t.deselectCurComponent}},[e("Editor")],1)])])],1)},i=[],s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor",class:{edit:t.isEdit},style:{...t.getCanvasStyle(t.canvasStyleData),width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:t.handleContextMenu,mousedown:t.handleMouseDown}},t._l(t.componentData,(function(n,o){return e("Shape",{key:n.id,class:{lock:n.isLock},style:t.getShapeStyle(n.style),attrs:{"default-style":n.style,active:n.id===(t.curComponent||{}).id,element:n,index:o}},[n.component.startsWith("SVG")?e(n.component,{tag:"component",staticClass:"component",style:t.getSVGStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}}):"VText"!=n.component?e(n.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}}):e(n.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request},on:{input:t.handleInput}})],1)})),1)},a=[],r=(n(6699),n(629)),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"shape",class:{active:t.active},on:{click:t.selectCurComponent,mousedown:t.handleMouseDownOnShape}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:t.handleRotate}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),t._l(t.isActive()?t.getPointList():[],(function(n){return e("div",{key:n,staticClass:"shape-point",style:t.getPointStyle(n),on:{mousedown:function(e){return t.handleMouseDownOnPoint(n,e)}}})})),t._t("default")],2)},c=[],u=n(4003);async function h(t,e=[]){const n=e=>new Promise((n=>{const{animationTime:o,value:i="",isLoop:s}=e;t.style.setProperty("--time",o+"s"),t.classList.add(i,"animated",d(s));const a=()=>{t.removeEventListener("animationend",a),t.removeEventListener("animationcancel",a),t.classList.remove(i,"animated",d(s)),t.style.removeProperty("--time"),n()};t.addEventListener("animationend",a),t.addEventListener("animationcancel",a)}));for(let o=0,i=e.length;o<i;o++)await n(e[o])}function d(t){return t?"infinite":"no-infinite"}var m=n(1457);const p={lt:f,t:w,rt:v,r:S,rb:g,b:b,lb:y,l:x};function f(t,e,n,o,i){const{symmetricPoint:s}=i;let a=(0,m.Lb)(e,s),r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)(s,a,-t.rotate),c=l.x-r.x,u=l.y-r.y;if(o){c/u>n?(r.x+=Math.abs(c-u*n),c=u*n):(r.y+=Math.abs(u-c/n),u=c/n);const e=(0,m.Ej)(r,a,t.rotate);a=(0,m.Lb)(e,s),r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)(s,a,-t.rotate),c=l.x-r.x,u=l.y-r.y}c>0&&u>0&&(t.width=Math.round(c),t.height=Math.round(u),t.left=Math.round(r.x),t.top=Math.round(r.y))}function v(t,e,n,o,i){const{symmetricPoint:s}=i;let a=(0,m.Lb)(e,s),r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)(s,a,-t.rotate),c=r.x-l.x,u=l.y-r.y;if(o){c/u>n?(r.x-=Math.abs(c-u*n),c=u*n):(r.y+=Math.abs(u-c/n),u=c/n);const e=(0,m.Ej)(r,a,t.rotate);a=(0,m.Lb)(e,s),r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)(s,a,-t.rotate),c=r.x-l.x,u=l.y-r.y}c>0&&u>0&&(t.width=Math.round(c),t.height=Math.round(u),t.left=Math.round(l.x),t.top=Math.round(r.y))}function g(t,e,n,o,i){const{symmetricPoint:s}=i;let a=(0,m.Lb)(e,s),r=(0,m.Ej)(s,a,-t.rotate),l=(0,m.Ej)(e,a,-t.rotate),c=l.x-r.x,u=l.y-r.y;if(o){c/u>n?(l.x-=Math.abs(c-u*n),c=u*n):(l.y-=Math.abs(u-c/n),u=c/n);const e=(0,m.Ej)(l,a,t.rotate);a=(0,m.Lb)(e,s),r=(0,m.Ej)(s,a,-t.rotate),l=(0,m.Ej)(e,a,-t.rotate),c=l.x-r.x,u=l.y-r.y}c>0&&u>0&&(t.width=Math.round(c),t.height=Math.round(u),t.left=Math.round(r.x),t.top=Math.round(r.y))}function y(t,e,n,o,i){const{symmetricPoint:s}=i;let a=(0,m.Lb)(e,s),r=(0,m.Ej)(s,a,-t.rotate),l=(0,m.Ej)(e,a,-t.rotate),c=r.x-l.x,u=l.y-r.y;if(o){c/u>n?(l.x+=Math.abs(c-u*n),c=u*n):(l.y-=Math.abs(u-c/n),u=c/n);const e=(0,m.Ej)(l,a,t.rotate);a=(0,m.Lb)(e,s),r=(0,m.Ej)(s,a,-t.rotate),l=(0,m.Ej)(e,a,-t.rotate),c=r.x-l.x,u=l.y-r.y}c>0&&u>0&&(t.width=Math.round(c),t.height=Math.round(u),t.left=Math.round(l.x),t.top=Math.round(r.y))}function w(t,e,n,o,i){const{symmetricPoint:s,curPoint:a}=i,r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)({x:a.x,y:r.y},a,t.rotate),c=Math.sqrt((l.x-s.x)**2+(l.y-s.y)**2),u={x:l.x-(l.x-s.x)/2,y:l.y+(s.y-l.y)/2};let h=t.width;o&&(h=c*n),t.width=h,t.height=Math.round(c),t.top=Math.round(u.y-c/2),t.left=Math.round(u.x-t.width/2)}function S(t,e,n,o,i){const{symmetricPoint:s,curPoint:a}=i,r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)({x:r.x,y:a.y},a,t.rotate),c=Math.sqrt((l.x-s.x)**2+(l.y-s.y)**2),u={x:l.x-(l.x-s.x)/2,y:l.y+(s.y-l.y)/2};let h=t.height;o&&(h=c/n),t.height=h,t.width=Math.round(c),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-c/2)}function b(t,e,n,o,i){const{symmetricPoint:s,curPoint:a}=i,r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)({x:a.x,y:r.y},a,t.rotate),c=Math.sqrt((l.x-s.x)**2+(l.y-s.y)**2),u={x:l.x-(l.x-s.x)/2,y:l.y+(s.y-l.y)/2};let h=t.width;o&&(h=c*n),t.width=h,t.height=Math.round(c),t.top=Math.round(u.y-c/2),t.left=Math.round(u.x-t.width/2)}function x(t,e,n,o,i){const{symmetricPoint:s,curPoint:a}=i,r=(0,m.Ej)(e,a,-t.rotate),l=(0,m.Ej)({x:r.x,y:a.y},a,t.rotate),c=Math.sqrt((l.x-s.x)**2+(l.y-s.y)**2),u={x:l.x-(l.x-s.x)/2,y:l.y+(s.y-l.y)/2};let h=t.height;o&&(h=c/n),t.height=h,t.width=Math.round(c),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-c/2)}function C(t,e,n,o,i,s){p[t](e,n,o,i,s)}var k=n(2648),$={props:{active:{type:Boolean,default:!1},element:{required:!0,type:Object,default:()=>{}},defaultStyle:{required:!0,type:Object,default:()=>{}},index:{required:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],pointList2:["r","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:(0,r.rn)(["curComponent","editor","showRight"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),u.Z.$on("runAnimation",(()=>{this.element==this.curComponent&&h(this.$el,this.curComponent.animations)})),u.Z.$on("stopAnimation",(()=>{this.$el.classList.remove("animated","infinite")}))},methods:{getPointList(){return"line-shape"===this.element.component?this.pointList2:this.pointList},isActive(){return this.active&&!this.element.isLock},handleRotate(t){this.$store.commit("setClickComponentStatus",!0),t.preventDefault(),t.stopPropagation();const e={...this.defaultStyle},n=t.clientY,o=t.clientX,i=e.rotate,s=this.$el.getBoundingClientRect(),a=s.left+s.width/2,r=s.top+s.height/2,l=Math.atan2(n-r,o-a)/(Math.PI/180);let c=!1;const u=t=>{c=!0;const n=t.clientX,o=t.clientY,s=Math.atan2(o-r,n-a)/(Math.PI/180);e.rotate=i+s-l,this.$store.commit("setShapeStyle",e)},h=()=>{c&&this.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h),this.cursors=this.getCursor()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)},getPointStyle(t){const{width:e,height:n}=this.defaultStyle,o=/t/.test(t),i=/b/.test(t),s=/l/.test(t),a=/r/.test(t);let r=0,l=0;2===t.length?(r=s?0:e,l=o?0:n):((o||i)&&(r=e/2,l=o?0:n),(s||a)&&(r=s?0:e,l=Math.floor(n/2)));const c={marginLeft:"-4px",marginTop:"-4px",left:`${r}px`,top:`${l}px`,cursor:this.cursors[t]};return c},getCursor(){const{angleToCursor:t,initialAngle:e,pointList:n,curComponent:o}=this,i=(0,m.KV)(o.style.rotate),s={};let a=-1;return n.forEach((n=>{const o=(0,m.KV)(e[n]+i),r=t.length;while(1){a=(a+1)%r;const e=t[a];if(o<23||o>=338)return void(s[n]="nw-resize");if(e.start<=o&&o<e.end)return void(s[n]=e.cursor+"-resize")}})),s},handleMouseDownOnShape(t){if(this.$nextTick((()=>u.Z.$emit("componentClick"))),this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),(0,k.rc)(this.element.component)&&t.preventDefault(),t.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),this.element.isLock)return;this.cursors=this.getCursor();const e={...this.defaultStyle},n=t.clientY,o=t.clientX,i=Number(e.top),s=Number(e.left);let a=!1;const r=t=>{a=!0;const r=t.clientX,l=t.clientY;e.top=l-n+i,e.left=r-o+s,this.$store.commit("setShapeStyle",e),this.$nextTick((()=>{u.Z.$emit("move",l-n>0,r-o>0)}))},l=()=>{a&&this.$store.commit("recordSnapshot"),u.Z.$emit("unmove"),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},selectCurComponent(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextMenu"),this.$store.state.rightList||this.$store.commit("isShowRightList")},handleMouseDownOnPoint(t,e){this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),e.stopPropagation(),e.preventDefault();const n={...this.defaultStyle},o=n.width/n.height,i={x:n.left+n.width/2,y:n.top+n.height/2},s=this.editor.getBoundingClientRect(),a=e.target.getBoundingClientRect(),r={x:Math.round(a.left-s.left+e.target.offsetWidth/2),y:Math.round(a.top-s.top+e.target.offsetHeight/2)},l={x:i.x-(r.x-i.x),y:i.y-(r.y-i.y)};let c=!1,u=!0;const h=this.isNeedLockProportion(),d=e=>{if(u)return void(u=!1);c=!0;const a={x:e.clientX-Math.round(s.left),y:e.clientY-Math.round(s.top)};C(t,n,a,o,h,{center:i,curPoint:r,symmetricPoint:l}),this.$store.commit("setShapeStyle",n)},m=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m),c&&this.$store.commit("recordSnapshot")};document.addEventListener("mousemove",d),document.addEventListener("mouseup",m)},isNeedLockProportion(){if("Group"!=this.element.component)return!1;const t=[0,90,180,360];for(const e of this.element.propValue)if(!t.includes((0,m.KV)(parseInt(e.style.rotate))))return!0;return!1}}},D=$,E=n(1001),L=(0,E.Z)(D,l,c,!1,null,"539ea6c4",null),M=L.exports,P=n(9748),_=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:t.menuTop+"px",left:t.menuLeft+"px"}},[e("ul",{on:{mouseup:t.handleMouseUp}},[t.curComponent?[t.curComponent.isLock?e("li",{on:{click:t.unlock}},[t._v("解锁")]):[e("li",{on:{click:t.copy}},[t._v("复制")]),e("li",{on:{click:t.paste}},[t._v("粘贴")]),e("li",{on:{click:t.cut}},[t._v("剪切")]),e("li",{on:{click:t.deleteComponent}},[t._v("删除")]),e("li",{on:{click:t.lock}},[t._v("锁定")]),e("li",{on:{click:t.topComponent}},[t._v("置顶")]),e("li",{on:{click:t.bottomComponent}},[t._v("置底")]),e("li",{on:{click:t.upComponent}},[t._v("上移")]),e("li",{on:{click:t.downComponent}},[t._v("下移")])]]:e("li",{on:{click:t.paste}},[t._v("粘贴")])],2)])},N=[],I={data(){return{copyData:null}},computed:(0,r.rn)(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},A=I,O=(0,E.Z)(A,_,N,!1,null,"ff223a58",null),T=O.exports,Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mark-line"},t._l(t.lines,(function(n){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.lineStatus[n]||!1,expression:"lineStatus[line] || false"}],key:n,ref:n,refInFor:!0,staticClass:"line",class:n.includes("x")?"xline":"yline"})})),0)},R=[],j={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:(0,r.rn)(["curComponent","componentData"]),mounted(){u.Z.$on("move",((t,e)=>{this.showLine(t,e)})),u.Z.$on("unmove",(()=>{this.hideLine()}))},methods:{hideLine(){Object.keys(this.lineStatus).forEach((t=>{this.lineStatus[t]=!1}))},showLine(t,e){const n=this.$refs,o=this.componentData,i=(0,P.fg)(this.curComponent.style),s=i.width/2,a=i.height/2;this.hideLine(),o.forEach((o=>{if(o==this.curComponent)return;const r=(0,P.fg)(o.style),{top:l,left:c,bottom:u,right:h}=r,d=r.width/2,m=r.height/2,p={top:[{isNearly:this.isNearly(i.top,l),lineNode:n.xt[0],line:"xt",dragShift:l,lineShift:l},{isNearly:this.isNearly(i.bottom,l),lineNode:n.xt[0],line:"xt",dragShift:l-i.height,lineShift:l},{isNearly:this.isNearly(i.top+a,l+m),lineNode:n.xc[0],line:"xc",dragShift:l+m-a,lineShift:l+m},{isNearly:this.isNearly(i.top,u),lineNode:n.xb[0],line:"xb",dragShift:u,lineShift:u},{isNearly:this.isNearly(i.bottom,u),lineNode:n.xb[0],line:"xb",dragShift:u-i.height,lineShift:u}],left:[{isNearly:this.isNearly(i.left,c),lineNode:n.yl[0],line:"yl",dragShift:c,lineShift:c},{isNearly:this.isNearly(i.right,c),lineNode:n.yl[0],line:"yl",dragShift:c-i.width,lineShift:c},{isNearly:this.isNearly(i.left+s,c+d),lineNode:n.yc[0],line:"yc",dragShift:c+d-s,lineShift:c+d},{isNearly:this.isNearly(i.left,h),lineNode:n.yr[0],line:"yr",dragShift:h,lineShift:h},{isNearly:this.isNearly(i.right,h),lineNode:n.yr[0],line:"yr",dragShift:h-i.width,lineShift:h}]},f=[],{rotate:v}=this.curComponent.style;Object.keys(p).forEach((t=>{p[t].forEach((e=>{e.isNearly&&(this.$store.commit("setShapeSingleStyle",{key:t,value:0!=v?this.translatecurComponentShift(t,e,i):e.dragShift}),e.lineNode.style[t]=`${e.lineShift}px`,f.push(e.line))}))})),f.length&&this.chooseTheTureLine(f,t,e)}))},translatecurComponentShift(t,e,n){const{width:o,height:i}=this.curComponent.style;return"top"==t?Math.round(e.dragShift-(i-n.height)/2):Math.round(e.dragShift-(o-n.width)/2)},chooseTheTureLine(t,e,n){n?t.includes("yr")?this.lineStatus.yr=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yl")&&(this.lineStatus.yl=!0):t.includes("yl")?this.lineStatus.yl=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yr")&&(this.lineStatus.yr=!0),e?t.includes("xb")?this.lineStatus.xb=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xt")&&(this.lineStatus.xt=!0):t.includes("xt")?this.lineStatus.xt=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xb")&&(this.lineStatus.xb=!0)},isNearly(t,e){return Math.abs(t-e)<=this.diff}}},U=j,V=(0,E.Z)(U,Z,R,!1,null,"475239c0",null),Y=V.exports,z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}})},B=[],F={props:{start:{type:Object,default:()=>{}},width:{type:Number,default:0},height:{type:Number,default:0}}},X=F,q=(0,E.Z)(X,z,B,!1,null,"30e7b1c2",null),J=q.exports,H=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[e("defs",[e("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[e("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:t.isDarkMode?"rgba(207, 207, 207, 0.5)":"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),e("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[e("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),e("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:t.isDarkMode?"rgba(186, 186, 186)":"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),e("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},W=[],G={props:{isDarkMode:Boolean}},K=G,Q=(0,E.Z)(K,H,W,!1,null,"00a9be0a",null),tt=Q.exports,et={components:{Shape:M,ContextMenu:T,MarkLine:Y,Area:J,Grid:tt},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1,svgFilterAttrs:["width","height","top","left","rotate"]}},computed:(0,r.rn)(["componentData","curComponent","canvasStyleData","editor","isDarkMode"]),mounted(){this.$store.commit("getEditor"),u.Z.$on("hideArea",(()=>{this.hideArea()}))},methods:{getShapeStyle:P.B$,getCanvasStyle:P.$i,changeStyleWithScale:m.EY,handleMouseDown(t){this.curComponent&&!(0,k.rc)(this.curComponent.component)||t.preventDefault(),this.hideArea();const e=this.editor.getBoundingClientRect();this.editorX=e.x,this.editorY=e.y;const n=t.clientX,o=t.clientY;this.start.x=n-this.editorX,this.start.y=o-this.editorY,this.isShowArea=!0;const i=t=>{this.width=Math.abs(t.clientX-n),this.height=Math.abs(t.clientY-o),t.clientX<n&&(this.start.x=t.clientX-this.editorX),t.clientY<o&&(this.start.y=t.clientY-this.editorY)},s=t=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s),t.clientX!=n||t.clientY!=o?this.createGroup():this.hideArea()};document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)},hideArea(){this.isShowArea=0,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup(){const t=this.getSelectArea();if(t.length<=1)return void this.hideArea();let e=1/0,n=1/0,o=-1/0,i=-1/0;t.forEach((t=>{let s={};"Group"==t.component?t.propValue.forEach((t=>{const a=(0,k.$)(`#component${t.id}`).getBoundingClientRect();s.left=a.left-this.editorX,s.top=a.top-this.editorY,s.right=a.right-this.editorX,s.bottom=a.bottom-this.editorY,s.left<n&&(n=s.left),s.top<e&&(e=s.top),s.right>o&&(o=s.right),s.bottom>i&&(i=s.bottom)})):s=(0,P.fg)(t.style),s.left<n&&(n=s.left),s.top<e&&(e=s.top),s.right>o&&(o=s.right),s.bottom>i&&(i=s.bottom)})),this.start.x=n,this.start.y=e,this.width=o-n,this.height=i-e,this.$store.commit("setAreaData",{style:{left:n,top:e,width:this.width,height:this.height},components:t})},getSelectArea(){const t=[],{x:e,y:n}=this.start;return this.componentData.forEach((o=>{if(o.isLock)return;const{left:i,top:s,width:a,height:r}=(0,P.fg)(o.style);e<=i&&n<=s&&i+a<=e+this.width&&s+r<=n+this.height&&t.push(o)})),t},handleContextMenu(t){t.stopPropagation(),t.preventDefault();let e=t.target,n=t.offsetY,o=t.offsetX;while(e instanceof SVGElement)e=e.parentNode;while(!e.className.includes("editor"))o+=e.offsetLeft,n+=e.offsetTop,e=e.parentNode;this.$store.commit("showContextMenu",{top:n,left:o})},getComponentStyle(t){return(0,P.C2)(t,this.svgFilterAttrs)},getSVGStyle(t){return(0,P.WF)(t,this.svgFilterAttrs)},handleInput(t,e){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(t,e)})},getTextareaHeight(t,e){let{lineHeight:n,fontSize:o,height:i}=t.style;""===n&&(n=1.5);const s=(e.split("<br>").length-1)*n*(o||this.canvasStyleData.fontSize);return i>s?i:s}}},nt=et,ot=(0,E.Z)(nt,s,a,!1,null,"f5cd10a4",null),it=ot.exports,st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"component-list",on:{dragstart:t.handleDragStart}},t._l(t.componentList,(function(n,o){return e("div",{key:o,staticClass:"list",attrs:{draggable:"","data-index":o}},[e("span",[t._v(t._s(n.label))])])})),0)},at=[],rt=n(6845),lt={data(){return{componentList:rt.ZP}},methods:{handleDragStart(t){t.dataTransfer.setData("index",t.target.dataset.index)}}},ct=lt,ut=(0,E.Z)(ct,st,at,!1,null,"67e8c46b",null),ht=ut.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"animation-list"},[e("div",{staticClass:"div-animation"},[e("el-button",{on:{click:function(e){t.isShowAnimation=!0}}},[t._v("添加动画")]),e("el-button",{on:{click:t.previewAnimate}},[t._v("预览动画")]),e("div",t._l(t.curComponent.animations,(function(n,o){return e("el-tag",{key:o,attrs:{closable:""},on:{close:function(e){return t.removeAnimation(o)}}},[t._v(" "+t._s(n.label)+" "),e("i",{staticClass:"cursor el-icon-setting",on:{click:function(e){return t.handleAnimationSetting(o)}}})])})),1)],1),e("Modal",{model:{value:t.isShowAnimation,callback:function(e){t.isShowAnimation=e},expression:"isShowAnimation"}},[e("el-tabs",{model:{value:t.animationActiveName,callback:function(e){t.animationActiveName=e},expression:"animationActiveName"}},t._l(t.animationClassData,(function(n){return e("el-tab-pane",{key:n.label,attrs:{label:n.label,name:n.label}},[e("el-scrollbar",{staticClass:"animate-container"},t._l(n.children,(function(n){return e("div",{key:n.value,ref:n.value,refInFor:!0,staticClass:"animate",on:{mouseenter:function(e){return t.runAnimation(n)},click:function(e){return t.addAnimation(n)}}},[e("div",[t._v(" "+t._s(n.label)+" ")])])})),0)],1)})),1)],1),t.isShowAnimationSetting?e("AnimationSettingModal",{attrs:{"cur-index":t.curIndex},on:{close:function(e){t.isShowAnimationSetting=!1}}}):t._e()],1)},mt=[],pt=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"modal-bg",on:{click:t.hide}},[e("div",{staticClass:"fadeInLeft animated modal",on:{click:t.stopPropagation}},[t._t("default")],2)]):t._e()},ft=[],vt={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide(){this.$emit("change")},stopPropagation(t){t.stopPropagation()}}},gt=vt,yt=(0,E.Z)(gt,pt,ft,!1,null,"50e9995c",null),wt=yt.exports;const St=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];St.forEach((t=>{t.children.forEach((t=>{t.pending=!1,t.animationTime=1}))}));var bt=St,xt=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:`${t.config.label} 动画配置`,visible:t.centerDialogVisible,width:"30%",center:""},on:{close:t.handleCloseModal}},[e("div",{staticClass:"time"},[t._v(" 动画时长："),e("el-input-number",{attrs:{"controls-position":"right",min:.1,precision:2,step:.01},model:{value:t.config.animationTime,callback:function(e){t.$set(t.config,"animationTime",e)},expression:"config.animationTime"}})],1),e("div",{staticClass:"loop"},[t._v(" 是否循环："),e("el-switch",{attrs:{"active-text":"是","inactive-text":"否",disabled:t.isDisabled},model:{value:t.config.isLoop,callback:function(e){t.$set(t.config,"isLoop",e)},expression:"config.isLoop"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleCloseModal}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveSetting}},[t._v("确 定")])],1)])},Ct=[],kt={name:"AnimationSettingModal",props:{curIndex:{type:Number,default:0}},data(){return{centerDialogVisible:!0,config:{}}},computed:{...(0,r.rn)(["curComponent"]),isDisabled(){return this.curComponent.animations.length>1}},created(){const{label:t,animationTime:e,isLoop:n=!1,value:o}=this.curComponent.animations[this.curIndex]||{};this.config={animationTime:e,label:t,isLoop:n,value:o}},methods:{handleCloseModal(){this.$emit("close")},handleSaveSetting(){const{isLoop:t}=this.config;this.$store.commit("alterAnimation",{index:this.curIndex,data:{animationTime:this.config.animationTime,isLoop:t}}),u.Z.$emit("stopAnimation"),this.handleCloseModal()}}},$t=kt,Dt=(0,E.Z)($t,xt,Ct,!1,null,"043aa3fa",null),Et=Dt.exports,Lt={components:{Modal:wt,AnimationSettingModal:Et},data(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:bt,showAnimatePanel:!1,timer:null,isShowAnimationSetting:!1,curIndex:0}},computed:(0,r.rn)(["curComponent"]),methods:{addAnimation(t){this.$store.commit("addAnimation",t),this.isShowAnimation=!1},previewAnimate(){u.Z.$emit("runAnimation")},removeAnimation(t){this.$store.commit("removeAnimation",t),this.curComponent.animations.length||u.Z.$emit("stopAnimation")},handleAnimationSetting(t){this.isShowAnimationSetting=!0,this.curIndex=t},async runAnimation(t){t.pending||(t.pending=!0,await h(this.$refs[t.value][0],[t]),setTimeout((()=>{t.pending=!1}),100))}}},Mt=Lt,Pt=(0,E.Z)(Mt,dt,mt,!1,null,null,null),_t=(Pt.exports,function(){var t=this,e=t._self._c;return e("div",{staticClass:"event-list"},[e("div",{staticClass:"div-events"},[e("el-button",{on:{click:function(e){t.isShowEvent=!0}}},[t._v("添加事件")]),e("div",t._l(Object.keys(t.curComponent.events),(function(n){return e("el-tag",{key:n,attrs:{closable:""},on:{close:function(e){return t.removeEvent(n)}}},[t._v(" "+t._s(n)+" ")])})),1)],1),e("Modal",{model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}},[e("el-tabs",{model:{value:t.eventActiveName,callback:function(e){t.eventActiveName=e},expression:"eventActiveName"}},t._l(t.eventList,(function(n){return e("el-tab-pane",{key:n.key,staticStyle:{padding:"40px 20px 0"},attrs:{label:n.label,name:n.key}},["redirect"==n.key?e("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:n.param,callback:function(e){t.$set(n,"param",e)},expression:"item.param"}}):t._e(),"alert"==n.key?e("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:n.param,callback:function(e){t.$set(n,"param",e)},expression:"item.param"}}):t._e(),e("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(e){return t.addEvent(n.key,n.param)}}},[t._v("确定")])],1)})),1)],1)],1)}),Nt=[];const It={redirect(t){t&&(window.location.href=t)},alert(t){t&&alert(t)}},At={methods:It},Ot=[{key:"redirect",label:"跳转事件",event:It.redirect,param:""},{key:"alert",label:"alert 事件",event:It.alert,param:""}];var Tt={components:{Modal:wt},data(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:Ot}},computed:(0,r.rn)(["curComponent"]),methods:{addEvent(t,e){this.isShowEvent=!1,this.$store.commit("addEvent",{event:t,param:e})},removeEvent(t){this.$store.commit("removeEvent",t)}}},Zt=Tt,Rt=(0,E.Z)(Zt,_t,Nt,!1,null,"0229e5d4",null),jt=(Rt.exports,function(){var t=this,e=t._self._c;return e("div",[e("div",{class:t.isDarkMode?"dark toolbar":"toolbar"},[e("el-button",{on:{click:t.onExportJSON}},[t._v("导出")]),e("el-button",{on:{click:t.undo}},[t._v("撤消")]),e("el-button",{on:{click:t.redo}},[t._v("重做")]),e("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.preview(!1)}}},[t._v("预览")]),e("el-button",{on:{click:t.save}},[t._v("保存")]),e("el-button",{on:{click:t.clearCanvas}},[t._v("清空画布")]),e("el-button",{on:{click:function(e){return t.preview(!0)}}},[t._v("截图")]),e("div",{staticClass:"canvas-config"},[e("span",[t._v("画布大小")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:t.canvasStyleData.width},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"width",e.target.value)}}}),e("span",[t._v("*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:t.canvasStyleData.height},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"height",e.target.value)}}})]),e("div",{staticClass:"canvas-config"},[e("span",[t._v("画布比例")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],domProps:{value:t.scale},on:{input:[function(e){e.target.composing||(t.scale=e.target.value)},t.handleScaleChange]}}),t._v(" % ")])],1),t.isShowPreview?e("Preview",{attrs:{"is-screenshot":t.isScreenshot},on:{close:t.handlePreviewChange}}):t._e(),e("el-dialog",{attrs:{title:t.isExport?"导出数据":"导入数据",visible:t.isShowDialog,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"600"},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("el-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入 JSON 数据"},model:{value:t.jsonData,callback:function(e){t.jsonData=e},expression:"jsonData"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isShowDialog=!1}}},[t._v("取 消")]),e("el-upload",{directives:[{name:"show",rawName:"v-show",value:!t.isExport,expression:"!isExport"}],attrs:{action:"/","before-upload":t.beforeUpload,"show-file-list":!1,accept:"application/json"}},[e("el-button",{attrs:{type:"primary"}},[t._v("选择 JSON 文件")])],1),e("el-button",{attrs:{type:"primary"},on:{click:t.processJSON}},[t._v("确 定")])],1)],1)],1)}),Ut=[],Vt=n(1840),Yt=n(9330),zt=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"bg"},[t.isScreenshot?e("el-button",{staticClass:"close",on:{click:t.htmlToImage}},[t._v("确定")]):e("el-button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]),e("div",{staticClass:"canvas-container"},[e("div",{staticClass:"canvas",style:{...t.getCanvasStyle(t.canvasStyleData),width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}},t._l(t.copyData,(function(t,n){return e("ComponentWrapper",{key:n,attrs:{config:t}})})),1)])],1)},Bt=[],Ft=function(){var t=this,e=t._self._c;return e("div",{on:{click:t.onClick,mouseenter:t.onMouseEnter}},[t.config.component.startsWith("SVG")?e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}}):e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}})],1)},Xt=[],qt={mixins:[At],props:{config:{type:Object,required:!0,default:()=>{}}},mounted(){h(this.$refs.component.$el,this.config.animations)},methods:{getStyle:P.C2,getSVGStyle:P.WF,onClick(){const t=this.config.events;Object.keys(t).forEach((e=>{this[e](t[e])})),u.Z.$emit("v-click",this.config.id)},onMouseEnter(){u.Z.$emit("v-hover",this.config.id)}}},Jt=qt,Ht=(0,E.Z)(Jt,Ft,Xt,!1,null,"195f3027",null),Wt=Ht.exports,Gt=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))};const Kt="application/font-woff",Qt="image/jpeg",te={woff:Kt,woff2:Kt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Qt,jpeg:Qt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function ee(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function ne(t){const e=ee(t).toLowerCase();return te[e]||""}function oe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),e&&(o.href=e),i.href=t,i.href}function ie(t){return-1!==t.search(/^(data:)/)}function se(t,e){return`data:${e};base64,${t}`}function ae(t){return t.split(/,/)[1]}const re=function(){let t=0;const e=()=>`0000${(Math.random()*Math.pow(36,4)<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)}();function le(t){const e=[];for(let n=0,o=t.length;n<o;n+=1)e.push(t[n]);return e}function ce(t,e){const n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}function ue(t){const e=ce(t,"border-left-width"),n=ce(t,"border-right-width");return t.clientWidth+e+n}function he(t){const e=ce(t,"border-top-width"),n=ce(t,"border-bottom-width");return t.clientHeight+e+n}function de(){let t,e;try{e=process}catch(o){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}function me(t){return new Promise(((e,n)=>{const o=new Image;o.onload=()=>e(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="sync",o.src=t}))}function pe(t){return Gt(this,void 0,void 0,(function*(){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}))}function fe(t,e,n){return Gt(this,void 0,void 0,(function*(){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),pe(i)}))}const ve={};function ge(t){let e=t.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(e)&&(e=e.replace(/.*\//,"")),e}function ye(t,e){const n=ge(t);if(null!=ve[n])return ve[n];e.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());const o=n=>{let o="";if(e.imagePlaceholder){const t=e.imagePlaceholder.split(/,/);t&&t[1]&&(o=t[1])}let i=`Failed to fetch resource: ${t}`;return n&&(i="string"===typeof n?n:n.message),i&&console.error(i),{blob:o,contentType:""}},i=window.fetch(t).then((t=>t.blob().then((e=>({blob:e,contentType:t.headers.get("Content-Type")||""}))))).then((({blob:t,contentType:e})=>new Promise(((n,o)=>{const i=new FileReader;i.onloadend=()=>n({contentType:e,blob:i.result}),i.onerror=o,i.readAsDataURL(t)})))).then((({blob:t,contentType:e})=>({contentType:e,blob:ae(t)}))).catch(o);return ve[n]=i,i}function we(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Se(t){return le(t).map((e=>{const n=t.getPropertyValue(e),o=t.getPropertyPriority(e);return`${e}: ${n}${o?" !important":""};`})).join(" ")}function be(t,e,n){const o=`.${t}:${e}`,i=n.cssText?we(n):Se(n);return document.createTextNode(`${o}{${i}}`)}function xe(t,e,n){const o=window.getComputedStyle(t,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const s=re();try{e.className=`${e.className} ${s}`}catch(r){return}const a=document.createElement("style");a.appendChild(be(s,n,o)),e.appendChild(a)}function Ce(t,e){xe(t,e,":before"),xe(t,e,":after")}var ke=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))};function $e(t){return ke(this,void 0,void 0,(function*(){const e=t.toDataURL();return"data:,"===e?Promise.resolve(t.cloneNode(!1)):me(e)}))}function De(t,e){return ke(this,void 0,void 0,(function*(){return Promise.resolve(t.poster).then((t=>ye(t,e))).then((e=>se(e.blob,ne(t.poster)||e.contentType))).then((t=>me(t)))}))}function Ee(t,e){return ke(this,void 0,void 0,(function*(){return t instanceof HTMLCanvasElement?$e(t):t instanceof HTMLVideoElement&&t.poster?De(t,e):Promise.resolve(t.cloneNode(!1))}))}const Le=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function Me(t,e,n){var o;return ke(this,void 0,void 0,(function*(){const i=Le(t)&&t.assignedNodes?le(t.assignedNodes()):le((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes);return 0===i.length||t instanceof HTMLVideoElement?Promise.resolve(e):i.reduce(((t,o)=>t.then((()=>Ie(o,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()).then((()=>e))}))}function Pe(t,e){const n=window.getComputedStyle(t),o=e.style;o&&(n.cssText?o.cssText=n.cssText:le(n).forEach((t=>{o.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))})))}function _e(t,e){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function Ne(t,e){return ke(this,void 0,void 0,(function*(){return e instanceof Element?Promise.resolve().then((()=>Pe(t,e))).then((()=>Ce(t,e))).then((()=>_e(t,e))).then((()=>e)):Promise.resolve(e)}))}function Ie(t,e,n){return ke(this,void 0,void 0,(function*(){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>Ee(t,e))).then((n=>Me(t,n,e))).then((e=>Ne(t,e))):Promise.resolve(null)}))}var Ae=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))};const Oe=/url\((['"]?)([^'"]+?)\1\)/g,Te=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,Ze=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Re(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function je(t){const e=[];return t.replace(Oe,((t,n,o)=>(e.push(o),t))),e.filter((t=>!ie(t)))}function Ue(t,e,n,o,i){const s=n?oe(e,n):e;return Promise.resolve(s).then((t=>i?i(t):ye(t,o))).then((t=>"string"===typeof t?se(t,ne(e)):se(t.blob,ne(e)||t.contentType))).then((n=>t.replace(Re(e),`$1${n}$3`))).then((t=>t),(()=>s))}function Ve(t,{preferredFontFormat:e}){return e?t.replace(Ze,(t=>{while(1){const[n,,o]=Te.exec(t)||[];if(!o)return"";if(o===e)return`src: ${n};`}})):t}function Ye(t){return-1!==t.search(Oe)}function ze(t,e,n){return Ae(this,void 0,void 0,(function*(){if(!Ye(t))return Promise.resolve(t);const o=Ve(t,n);return Promise.resolve(o).then(je).then((t=>t.reduce(((t,o)=>t.then((t=>Ue(t,o,e,n)))),Promise.resolve(o))))}))}var Be=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))};function Fe(t,e){var n;return Be(this,void 0,void 0,(function*(){const o=null===(n=t.style)||void 0===n?void 0:n.getPropertyValue("background");return o?Promise.resolve(o).then((t=>ze(t,null,e))).then((e=>(t.style.setProperty("background",e,t.style.getPropertyPriority("background")),t))):Promise.resolve(t)}))}function Xe(t,e){return Be(this,void 0,void 0,(function*(){if((!(t instanceof HTMLImageElement)||ie(t.src))&&(!(t instanceof SVGImageElement)||ie(t.href.baseVal)))return Promise.resolve(t);const n=t instanceof HTMLImageElement?t.src:t.href.baseVal;return Promise.resolve(n).then((t=>ye(t,e))).then((t=>se(t.blob,ne(n)||t.contentType))).then((e=>new Promise(((n,o)=>{t.onload=n,t.onerror=o,t instanceof HTMLImageElement?(t.srcset="",t.src=e):t.href.baseVal=e})))).then((()=>t),(()=>t))}))}function qe(t,e){return Be(this,void 0,void 0,(function*(){const n=le(t.childNodes),o=n.map((t=>Je(t,e)));return Promise.all(o).then((()=>t))}))}function Je(t,e){return Be(this,void 0,void 0,(function*(){return t instanceof Element?Promise.resolve(t).then((t=>Fe(t,e))).then((t=>Xe(t,e))).then((t=>qe(t,e))):Promise.resolve(t)}))}function He(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const o=e.style;return null!=o&&Object.keys(o).forEach((t=>{n[t]=o[t]})),t}var We=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))};const Ge={};function Ke(t){const e=Ge[t];if(null!=e)return e;const n=window.fetch(t).then((e=>({url:t,cssText:e.text()})));return Ge[t]=n,n}function Qe(t){return We(this,void 0,void 0,(function*(){return t.cssText.then((e=>{let n=e;const o=/url\(["']?([^"')]+)["']?\)/g,i=n.match(/url\([^)]+\)/g)||[],s=i.map((e=>{let i=e.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,t.url).href),window.fetch(i).then((t=>t.blob())).then((t=>new Promise(((o,i)=>{const s=new FileReader;s.onloadend=()=>{n=n.replace(e,`url(${s.result})`),o([e,s.result])},s.onerror=i,s.readAsDataURL(t)}))))}));return Promise.all(s).then((()=>n))}))}))}function tn(t){if(null==t)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");while(1){const t=i.exec(o);if(null===t)break;e.push(t[0])}o=o.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",r=new RegExp(a,"gi");while(1){let t=s.exec(o);if(null===t){if(t=r.exec(o),null===t)break;s.lastIndex=r.lastIndex}else r.lastIndex=s.lastIndex;e.push(t[0])}return e}function en(t){return We(this,void 0,void 0,(function*(){const e=[],n=[];return t.forEach((e=>{if("cssRules"in e)try{le(e.cssRules).forEach(((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let i=o+1;const s=t.href,a=Ke(s).then((t=>t?Qe(t):"")).then((t=>tn(t).forEach((t=>{try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(n){console.error("Error inserting rule from remote css",{rule:t,error:n})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));n.push(a)}}))}catch(o){const i=t.find((t=>null==t.href))||document.styleSheets[0];null!=e.href&&n.push(Ke(e.href).then((t=>t?Qe(t):"")).then((t=>tn(t).forEach((t=>{i.insertRule(t,e.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t.toString())}))),console.error("Error inlining remote css file",o.toString())}})),Promise.all(n).then((()=>(t.forEach((t=>{if("cssRules"in t)try{le(t.cssRules).forEach((t=>{e.push(t)}))}catch(n){console.error(`Error while reading CSS rules from ${t.href}`,n.toString())}})),e)))}))}function nn(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>Ye(t.style.getPropertyValue("src"))))}function on(t){return We(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{null==t.ownerDocument&&n(new Error("Provided element is not within a Document")),e(le(t.ownerDocument.styleSheets))})).then((t=>en(t))).then(nn)}))}function sn(t,e){return We(this,void 0,void 0,(function*(){return on(t).then((t=>Promise.all(t.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return ze(t.cssText,n,e)}))))).then((t=>t.join("\n")))}))}function an(t,e){return We(this,void 0,void 0,(function*(){return(null!=e.fontEmbedCSS?Promise.resolve(e.fontEmbedCSS):sn(t,e)).then((e=>{const n=document.createElement("style"),o=document.createTextNode(e);return n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),t}))}))}var rn=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))};function ln(t,e={}){const n=e.width||ue(t),o=e.height||he(t);return{width:n,height:o}}function cn(t,e={}){return rn(this,void 0,void 0,(function*(){const{width:n,height:o}=ln(t,e);return Promise.resolve(t).then((t=>Ie(t,e,!0))).then((t=>an(t,e))).then((t=>Je(t,e))).then((t=>He(t,e))).then((t=>fe(t,n,o)))}))}const un=16384;function hn(t){(t.width>un||t.height>un)&&(t.width>un&&t.height>un?t.width>t.height?(t.height*=un/t.width,t.width=un):(t.width*=un/t.height,t.height=un):t.width>un?(t.height*=un/t.width,t.width=un):(t.width*=un/t.height,t.height=un))}function dn(t,e={}){return rn(this,void 0,void 0,(function*(){return cn(t,e).then(me).then((n=>{const o=document.createElement("canvas"),i=o.getContext("2d"),s=e.pixelRatio||de(),{width:a,height:r}=ln(t,e),l=e.canvasWidth||a,c=e.canvasHeight||r;return o.width=l*s,o.height=c*s,e.skipAutoScale||hn(o),o.style.width=`${l}`,o.style.height=`${c}`,e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(n,0,0,o.width,o.height),o}))}))}function mn(t,e={}){return rn(this,void 0,void 0,(function*(){return dn(t,e).then((t=>t.toDataURL()))}))}var pn={components:{ComponentWrapper:Wt},props:{isScreenshot:{type:Boolean,default:!1}},data(){return{copyData:[]}},computed:(0,r.rn)(["componentData","canvasStyleData"]),created(){this.$set(this,"copyData",(0,k.p$)(this.componentData))},methods:{getStyle:P.C2,getCanvasStyle:P.$i,changeStyleWithScale:m.EY,close(){this.$emit("close")},htmlToImage(){mn(this.$refs.container.querySelector(".canvas")).then((t=>{const e=document.createElement("a");e.setAttribute("download","screenshot"),e.href=t,e.click()})).catch((t=>{console.error("oops, something went wrong!",t)})).finally(this.close)}}},fn=pn,vn=(0,E.Z)(fn,zt,Bt,!1,null,"0ee74487",null),gn=vn.exports,yn=n(8867),wn=n(715);const Sn=["top","left","width","height","fontSize"];function bn(t){const e=(0,k.p$)(yn.Z.state.componentData);e.forEach((e=>{Object.keys(e.style).forEach((n=>{if(Sn.includes(n)){if("fontSize"===n&&""===e.style[n])return;e.style[n]=kn($n(e.style[n],yn.Z.state.canvasStyleData.scale),t)}}))})),yn.Z.commit("setComponentData",e),yn.Z.commit("setCurComponent",{component:e[yn.Z.state.curComponentIndex],index:yn.Z.state.curComponentIndex}),yn.Z.commit("setCanvasStyle",{...yn.Z.state.canvasStyleData,scale:t})}const xn=["width","height","fontSize"];function Cn(t){Object.keys(t.style).forEach((e=>{if(xn.includes(e)){if("fontSize"===e&&""===t.style[e])return;t.style[e]=kn(t.style[e],yn.Z.state.canvasStyleData.scale)}}))}function kn(t,e){return(0,wn.JpY)(t,(0,wn.csF)(parseFloat(e),100))}function $n(t,e){return(0,wn.csF)(t,(0,wn.csF)(parseFloat(e),100))}var Dn={components:{Preview:gn},data(){return{isShowPreview:!1,isShowAceEditor:!1,timer:null,isScreenshot:!1,scale:100,switchValue:!1,isShowDialog:!1,jsonData:"",isExport:!1}},computed:(0,r.rn)(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex","isDarkMode"]),created(){u.Z.$on("preview",this.preview),u.Z.$on("save",this.save),u.Z.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale;const t=JSON.parse(localStorage.getItem("isDarkMode"));t&&this.handleToggleDarkMode(t)},methods:{handleToggleDarkMode(t){null!==t&&(this.$store.commit("toggleDarkMode",t),this.switchValue=t)},handleScaleChange(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.scale=~~this.scale||1,bn(this.scale)}),1e3)},closeEditor(){this.onAceEditorChange()},lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},compose(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo(){this.$store.commit("undo")},redo(){this.$store.commit("redo")},handleFileChange(t){const e=t.target.files[0];if(!e.type.includes("image"))return void(0,Yt.Z)("只能插入图片");const n=new FileReader;n.onload=t=>{const e=t.target.result,n=new Image;n.onload=()=>{const t={...rt.$Z,id:(0,Vt.Z)(),component:"Picture",label:"图片",icon:"",propValue:{url:e,flip:{horizontal:!1,vertical:!1}},style:{...rt.zH,top:0,left:0,width:n.width,height:n.height}};Cn(t),this.$store.commit("addComponent",{component:t}),this.$store.commit("recordSnapshot"),(0,k.$)("#input").setAttribute("type","text"),(0,k.$)("#input").setAttribute("type","file")},n.src=e},n.readAsDataURL(e)},preview(t){this.isScreenshot=t,this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},save(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData)),this.$message.success("保存成功")},clearCanvas(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange(){this.isShowPreview=!1,this.$store.commit("setEditMode","edit")},onImportJSON(){this.jsonData="",this.isExport=!1,this.isShowDialog=!0},processJSON(){try{const t=JSON.parse(this.jsonData);if(!Array.isArray(t))return void this.$message.error("数据格式错误，组件数据必须是一个数组");this.isExport?this.downloadFileUtil(this.jsonData,"application/json","data.json"):this.$store.commit("setComponentData",t),this.isShowDialog=!1}catch(t){this.$message.error("数据格式错误，请传入合法的 JSON 格式数据")}},onExportJSON(){this.isShowDialog=!0,this.isExport=!0,this.jsonData=JSON.stringify(this.componentData,null,4)},downloadFileUtil(t,e,n=""){const o=window.URL.createObjectURL(new Blob([t],{type:e})),i=document.createElement("a");i.style.display="none",i.href=o,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},beforeUpload(t){const e=new FileReader;e.readAsText(t);const n=this;return e.onload=function(){n.jsonData=this.result,console.log(this.result)},!1}}},En=Dn,Ln=(0,E.Z)(En,jt,Ut,!1,null,"30d0182e",null),Mn=Ln.exports,Pn=n(9657),_n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"real-time-component-list"},t._l(t.componentData,(function(n,o){return e("div",{key:o,staticClass:"list",class:{actived:t.transformIndex(o)===t.curComponentIndex},on:{click:function(e){t.onClick(t.transformIndex(o))}}},[e("span",{staticClass:"iconfont",class:"icon-"+t.getComponent(o).icon}),e("span",[t._v(t._s(t.getComponent(o).label))]),e("div",{staticClass:"icon-container"},[e("span",{staticClass:"iconfont icon-shangyi",on:{click:function(e){t.upComponent(t.transformIndex(o))}}}),e("span",{staticClass:"iconfont icon-xiayi",on:{click:function(e){t.downComponent(t.transformIndex(o))}}}),e("span",{staticClass:"iconfont icon-shanchu",on:{click:function(e){t.deleteComponent(t.transformIndex(o))}}})])])})),0)},Nn=[],In={computed:(0,r.rn)(["componentData","curComponent","curComponentIndex"]),methods:{getComponent(t){return this.componentData[this.componentData.length-1-t]},transformIndex(t){return this.componentData.length-1-t},onClick(t){this.$store.state.rightList||this.$store.commit("isShowRightList"),this.setCurComponent(t)},deleteComponent(){setTimeout((()=>{this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")}))},upComponent(){setTimeout((()=>{this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")}))},downComponent(){setTimeout((()=>{this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")}))},setCurComponent(t){this.$store.commit("setCurComponent",{component:this.componentData[t],index:t})}}},An=In,On=(0,E.Z)(An,_n,Nn,!1,null,"28b2dfe6",null),Tn=(On.exports,function(){var t=this,e=t._self._c;return e("div",{staticClass:"attr-container"},[e("p",{staticClass:"title"},[t._v("画布属性")]),e("el-form",{staticStyle:{padding:"20px"}},t._l(Object.keys(t.options),(function(n,o){return e("el-form-item",{key:o,attrs:{label:t.options[n]}},[t.isIncludesColor(n)?e("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.canvasStyleData[n],callback:function(e){t.$set(t.canvasStyleData,n,e)},expression:"canvasStyleData[key]"}}):e("el-input",{attrs:{type:"number"},model:{value:t.canvasStyleData[n],callback:function(e){t.$set(t.canvasStyleData,n,t._n(e))},expression:"canvasStyleData[key]"}})],1)})),1)],1)}),Zn=[],Rn={data(){return{options:{color:"颜色",opacity:"不透明度",backgroundColor:"背景色",fontSize:"字体大小"}}},computed:(0,r.rn)(["canvasStyleData"]),methods:{isIncludesColor(t){return t.toLowerCase().includes("color")}}},jn=Rn,Un=(0,E.Z)(jn,Tn,Zn,!1,null,null,null),Vn=(Un.exports,n(3703)),Yn={components:{Editor:it,ComponentList:ht,Toolbar:Mn},data(){return{activeName:"attr",reSelectAnimateIndex:void 0,leftList:!0}},computed:(0,r.rn)(["componentData","curComponent","isClickComponent","canvasStyleData","editor","rightList","isDarkMode"]),created(){this.restore(),(0,Pn.Y)();const t=localStorage.getItem("isDarkMode");null!==t?this.$store.commit("toggleDarkMode",JSON.parse(t)):this.$store.isDarkMode=!1},methods:{restore(){localStorage.getItem("canvasData")&&((0,Vn.o)(JSON.parse(localStorage.getItem("canvasData"))),this.$store.commit("setComponentData",JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&this.$store.commit("setCanvasStyle",JSON.parse(localStorage.getItem("canvasStyle")))},handleDrop(t){t.preventDefault(),t.stopPropagation();const e=t.dataTransfer.getData("index"),n=this.editor.getBoundingClientRect();if(e){const o=(0,k.p$)(rt.ZP[e]);o.style.top=t.clientY-n.y,o.style.left=t.clientX-n.x,o.id=(0,Vt.Z)(),Cn(o),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleMouseDown(t){t.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(t){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),2!=t.button&&this.$store.commit("hideContextMenu")},isShowLeft(){let t=!this.leftList;this.leftList=t},isShowRight(){this.$store.commit("isShowRightList")}}},zn=Yn,Bn=(0,E.Z)(zn,o,i,!1,null,null,null),Fn=Bn.exports},9657:function(t,e,n){n.d(e,{Y:function(){return D},k:function(){return b}});var o=n(8867),i=n(4003);const s=17,a=91,r=86,l=67,c=88,u=89,h=90,d=71,m=66,p=76,f=85,v=83,g=80,y=68,w=46,S=69,b=[66,67,68,69,71,76,80,83,85,86,88,89,90],x={[r]:L,[u]:P,[h]:_,[v]:A,[g]:O,[S]:Z},C={...x,[f]:j},k={...x,[l]:E,[c]:M,[d]:N,[m]:I,[y]:T,[w]:T,[p]:R};let $=!1;function D(){window.onkeydown=t=>{if(!o.Z.state.isInEdiotr)return;const{curComponent:e}=o.Z.state,{keyCode:n}=t;n===s||n===a?$=!0:n==w&&e?(o.Z.commit("deleteComponent"),o.Z.commit("recordSnapshot")):$&&(!k[n]||e&&e.isLock?C[n]&&e&&e.isLock&&(t.preventDefault(),C[n]()):(t.preventDefault(),k[n]()))},window.onkeyup=t=>{t.keyCode!==s&&t.keyCode!==a||($=!1)},window.onmousedown=()=>{o.Z.commit("setInEditorStatus",!1)}}function E(){o.Z.commit("copy")}function L(){o.Z.commit("paste"),o.Z.commit("recordSnapshot")}function M(){o.Z.commit("cut")}function P(){o.Z.commit("redo")}function _(){o.Z.commit("undo")}function N(){o.Z.state.areaData.components.length&&(o.Z.commit("compose"),o.Z.commit("recordSnapshot"))}function I(){const t=o.Z.state.curComponent;t&&!t.isLock&&"Group"==t.component&&(o.Z.commit("decompose"),o.Z.commit("recordSnapshot"))}function A(){i.Z.$emit("save")}function O(){i.Z.$emit("preview")}function T(){o.Z.state.curComponent&&(o.Z.commit("deleteComponent"),o.Z.commit("recordSnapshot"))}function Z(){i.Z.$emit("clearCanvas")}function R(){o.Z.commit("lock")}function j(){o.Z.commit("unlock")}}}]);
//# sourceMappingURL=430.6799533e.js.map